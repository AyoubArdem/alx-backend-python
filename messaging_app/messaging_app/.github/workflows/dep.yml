name: Docker image

on: 
 push:
  branches: main

jobs:
 build&push:
  runs-on: ubuntu-latest
 steps:
  uses: actions/checkout@v3
  - name: docker login
    run: docker/login-action@v3
    with:
        username: ${{ secrets.DOCKER_USERNAME }}
        password: ${{ secrets.DOCKER_PASSWORD }}

  - name: build image
    run: - name: Build Docker Image
      run: |
        docker build -t ${{ secrets.DOCKER_USERNAME }}/messaging_app:latest .

    - name: Push Docker Image
      run: |
        docker push ${{ secrets.DOCKER_USERNAME }}/messaging_app:latest

    
